%form#document_metadata{ :action=>url_for(:action=>"update", :controller=>"assets", :content_type=>"hydrangea_article"), :method=>"post","data-resourceType"=>"hydrangea_article", "accept-charset"=>"utf-8"}
  %dl
    =# hidden_form_tag "content_type", :value=>"hydrangea_article"
    - title = editable_metadata_field(@document_fedora, "descMetadata", [:title_info, :main_title], :label => "Title:")
    %dt
      %label{:for=>"title"}
        = title[:label]
    %dd#title
      = title[:field]
    
    - language = editable_metadata_field(@document_fedora, "descMetadata", [:title_info, :language], :label => "Language:")
    %dt
      %label{:for=>"language"}
        = language[:label]
    %dd#language
      = language[:field]
  
  // Button for adding person/conference/organization
  - if params[:action] == "edit"
    - format = document_partial_name(@document)
    %div#add-contributor-box
      %input#re-run-add-contributor-action{:type => "button", :value => "Add a person", :onclick => "javascript:location.href = '#{url_for(:action => "create", :asset_id=>@document_fedora.pid, :controller => "contributors", :content_type => format, :contributor_type=>"person")}'"}
      %button#add-contributor-select Select
      %ul#add-contributor-menu
        %li{:onclick => "javascript:navigateTo(this, '#{url_for(:action => "create", :asset_id=>@document_fedora.pid, :controller => "contributors", :content_type => format, :contributor_type=>"person")}');"} Add a person
        %li{:onclick => "javascript:navigateTo(this, '#{url_for(:action => "create", :asset_id=>@document_fedora.pid, :controller => "contributors", :content_type => format, :contributor_type=>"organizaton")}');"} Add an organization
        %li{:onclick => "javascript:navigateTo(this, '#{url_for(:action => "create", :asset_id=>@document_fedora.pid, :controller => "contributors", :content_type => format, :contributor_type=>"conference")}');"} Add a conference
      
  = render :partial=>"hydrangea_articles/edit_person", :collection=>@document_fedora.datastreams_in_memory["descMetadata"].retrieve(:person)
  = render :partial=>"hydrangea_articles/edit_organization", :collection=>@document_fedora.datastreams_in_memory["descMetadata"].retrieve(:organization)
  = render :partial=>"hydrangea_articles/edit_conference", :collection=>@document_fedora.datastreams_in_memory["descMetadata"].retrieve(:conference)
  
  %dl
    - abstract = editable_metadata_field(@document_fedora, "descMetadata", :abstract, :label => "Abstract:", :type=>:text_area, :multiple=>false)
    %dt
      %label{:for=>"abstract"}
        = abstract[:label]
    %dd#abstract{"data-datastream-name"=>"descMetadata"}
      = abstract[:field]
    
  = render :partial=>"hydrangea_articles/edit_journal", :collection=>@document_fedora.datastreams_in_memory["descMetadata"].retrieve(:journal)
  
  / %dl
  /   - original_url = editable_metadata_field(@document_fedora, "descMetadata", :original_url, :label => "Original URL:")
  /   %dt
  /     %label{:for=>"original_url"}
  /       = original_url[:label]
  /   %dd#original_url
  /     = original_url[:field]
  
  %dl
    - topic_tag = editable_metadata_field(@document_fedora, "descMetadata", :topic_tag, :label => "Topic Tags:",:multiple=>true)
    %dt
      %label{:for=>"topic_tag"}
        = topic_tag[:label]
    %dd#topic_tag{"data-datastream-name"=>"descMetadata"}
      = topic_tag[:field]